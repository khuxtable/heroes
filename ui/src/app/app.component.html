<!--
  ~ Copyright 2023 the original author or authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not
  ~ use this file except in compliance with the License. You may obtain a copy of
  ~ the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing permissions and limitations under
  ~ the License.
  -->
<div class="m-1">
	<div style="display: flex; justify-content: space-between">
		<div style="font-size: 2em; font-weight: bold; vertical-align: middle;">{{title}}</div>

		<ng-container *ngIf="user">
			<p-overlayPanel #profilePanel>
				<ng-template pTemplate="content">
					<div class="grid" style="width: 30rem">
						<div class="col">
							<p>
								Name:<br/>
								{{user.firstName}} {{user.lastName}}
							</p>
							<p>
								Privileges:<br/>
								{{user.privileges!.join(', ')}}
							</p>
							<p>
								Theme:<br/>
								<p-selectButton *ngIf="user" [options]="themeOptions" [(ngModel)]="value"
								                (onOptionClick)="changeTheme(value)"/>
							</p>
						</div>
						<div class="col" style="text-align: center">
							<p>
								<img [src]="avatar" width="128px" height="128px" alt="Avatar"/><br/>
								<p-button styleClass="p-button-link" (click)="logout()" label="Logout"/>
							</p>
						</div>
					</div>
				</ng-template>
			</p-overlayPanel>
			<img [src]="avatar"
			     style="margin: .5rem; width: 2rem; height: 2rem; border-radius: 50%"
			     alt="Avatar"
			     (click)="profilePanel.toggle($event)"
			/>
		</ng-container>
	</div>

	<p-toolbar *ngIf="user">
		<div class="p-toolbar-group-start">
		<span class="p-buttonset">
			<p-button routerLink="/dashboard" label="Dashboard"></p-button>
			<p-button routerLink="/heroes" label="Heroes"></p-button>
		</span>
		</div>
	</p-toolbar>

	<router-outlet></router-outlet>

	<app-messages *ngIf="user"></app-messages>
</div>